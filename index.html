<!DOCTYPE html>
<html lang="ja">
	<head>
		<meta charset="utf-8">
		<title>0re0re blog</title>
		<link rel="stylesheet" href="default.css">
		<link rel="stylesheet" href="main.css">
	</head>
<body>
	<h1 class="logo"><a href="http://mymyserver.daemon.asia">0re0re blog</a></h1>

	<div class="row"><h3>è¨˜äº‹ä¸€è¦§</h3>
			<input id="searchBox" type="search" name="q" placeholder="ðŸ”Ž" >
	</div>
<hr>
<div id="posts"></div>
<script>
	let postData = ""
fetch('posts.json')
  .then(r => r.json())
  .then(d => {
	  postData = d
    d.forEach(p => {
	    posts.innerHTML += `<h4><a  href="${p.url}">${p.title}</h4></a><p class="flex1">${p.date}<small>${p.tags.join(', ')}</small></p>`;
    });
  });
function searchPosts(keyword) {
  const result = postData.filter(post => {
    const combined = `${post.title} ${post.date} ${post.tags.join(' ')}`;
    return combined.toLowerCase().includes(keyword.toLowerCase());
  });

  const container = document.getElementById('posts');
  if (result.length === 0) {
    container.innerHTML = '<p>Not found</p>';
    return;
  }

  container.innerHTML = result.map(post => `
    <article>
      <h2><a href="${post.url}">${post.title}</a></h2>
      <p>${post.date}</p>
      <p>${post.tags.map(tag => `<span>${tag}</span>`).join(' ')}</p>
    </article>
  `).join('');
}
document.getElementById('searchBox').addEventListener('keydown', function(event) {
  if (event.key === 'Enter') {
    event.preventDefault();

    const query = this.value.trim();
    if (!query) return; 
	  searchPosts(query);
	   }
});
</script>
</body>
</html>
